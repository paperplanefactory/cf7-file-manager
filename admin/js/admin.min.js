(function(e){"use strict";const t={init:function(){this.bindEvents(),this.initFilters()},bindEvents:function(){e(document).on("click",".delete-file",this.handleDelete.bind(this)),e(".cf7fm-filters select").on("change",this.handleFilterChange.bind(this)),e(".cf7fm-search").on("input",this.debounce(this.handleSearch.bind(this),500))},initFilters:function(){this.initialFilters={form:e(".cf7fm-select").val(),search:e(".cf7fm-search").val()}},handleDelete:function(t){t.preventDefault();const c=e(t.currentTarget),n=c.data("filename"),s=c.data("file-id");this.confirmDelete(n)&&this.deleteFile(c,n,s)},confirmDelete:function(e){return confirm(cf7fm_vars.confirm_delete)},deleteFile:function(t,c,n){const s=t.closest("tr");t.addClass("updating-message").prop("disabled",!0),e.ajax({url:cf7fm_vars.ajax_url,type:"POST",data:{action:"delete_cf7_file",filename:c,file_id:n,nonce:cf7fm_vars.nonce},success:e=>{e.success?this.handleDeleteSuccess(s):this.handleDeleteError(t,e.data)},error:()=>{this.handleDeleteError(t)}})},handleDeleteSuccess:function(t){t.fadeOut(400,()=>{t.remove(),0===e(".wp-list-table tbody tr").length&&this.showEmptyState(),this.showNotice(cf7fm_vars.delete_success,"success")})},handleDeleteError:function(e,t){e.removeClass("updating-message").prop("disabled",!1),this.showNotice(t||cf7fm_vars.delete_error,"error")},showEmptyState:function(){const t=e(".wp-list-table tbody"),c=cf7fm_vars.no_files;t.html(`\n                <tr>\n                    <td colspan="6" class="cf7fm-empty-state">\n                        ${c}\n                    </td>\n                </tr>\n            `)},handleFilterChange:function(t){e(t.target).closest("form").submit()},handleSearch:function(t){const c=e(t.target).val();(0===c.length||c.length>2)&&e(t.target).closest("form").submit()},showNotice:function(t,c="success"){const n=e(`\n                <div class="cf7fm-notice cf7fm-notice--${c}">\n                    ${t}\n                </div>\n            `).hide();e(".cf7fm-notice").remove(),e(".wrap").prepend(n),n.fadeIn(),setTimeout(()=>{n.fadeOut(()=>n.remove())},4e3)},debounce:function(e,t){let c;return function(...n){const s=()=>{clearTimeout(c),e(...n)};clearTimeout(c),c=setTimeout(s,t)}}};e(document).ready(()=>{t.init()})})(jQuery),function(e){"use strict";function t(){var t=e(".file-checkbox:checked").length;e("#delete-selected").prop("disabled",0===t)}e("#cb-select-all").on("change",function(){e(".file-checkbox").prop("checked",e(this).prop("checked")),t()}),e(document).on("change",".file-checkbox",function(){t();var c=e(".file-checkbox:checked").length===e(".file-checkbox").length;e("#cb-select-all").prop("checked",c)}),e("#delete-selected").on("click",function(){if(confirm(cf7fm_vars.confirm_delete_multiple)){var c=[];e(".file-checkbox:checked").each(function(){c.push(e(this).val())});var n=e(this);n.addClass("updating-message").prop("disabled",!0),e.ajax({url:cf7fm_vars.ajax_url,type:"POST",data:{action:"delete_multiple_cf7_files",file_ids:c,nonce:cf7fm_vars.nonce},success:function(t){t.success?(c.forEach(function(t){e('input[value="'+t+'"]').closest("tr").fadeOut(400,function(){e(this).remove(),0===e(".wp-list-table tbody tr").length&&e(".wp-list-table tbody").append('<tr><td colspan="7">'+cf7fm_vars.no_files+"</td></tr>")})}),alert(t.data.message)):alert(t.data.message||cf7fm_vars.delete_error)},error:function(){alert(cf7fm_vars.ajax_error)},complete:function(){n.removeClass("updating-message").prop("disabled",!1),e("#cb-select-all").prop("checked",!1),t()}})}})}(jQuery);